"use strict";!function(){var t=angular.module("app",["ngRoute","firebase"]);t.constant("FIREBASE_URL","https://psi-api.firebaseio.com"),t.config(["$routeProvider",function(t){t.when("/",{templateUrl:"app/core/templates/home.html"}),t.when("/about",{templateUrl:"app/core/templates/about.html"}),t.when("/account",{templateUrl:"app/core/templates/account.html"}),t.when("/dashboard",{templateUrl:"app/dashboard/dashboard.html"}),t.when("/details",{templateUrl:"app/details/details.html"}),t.otherwise({redirectTo:"/"})}]),t.run(["$rootScope","$location","authService",function(t,e,n){t.$on("$routeChangeStart",function(t,o,r){n.isLoggedIn()?console.log("Route Authenticated"):(e.path("/"),console.log("Route Unauthenticated"))})}])}(),function(){function t(t,e){function n(t){return i.$authWithOAuthPopup(t).then(function(t){var e=a.child("/users/"+t.uid);return e.child("authData").set(t),t})["catch"](function(t){return console.log("Authentication failed:",t)})}function o(){a.unauth()}function r(){return!!a.getAuth()}var a=new Firebase(e),i=t(a),u={login:n,logout:o,isLoggedIn:r};return u}angular.module("app").factory("authService",t),t.$inject=["$firebaseAuth","FIREBASE_URL"]}(),function(){function t(t,e,n,o){function r(e){o.login(e).then(function(e){i(e),t.path("/dashboard")})["catch"](function(t){return console.log("Authentication failed:",t)})}function a(){t.path("/"),o.logout(),l.provider="Not logged in",l.isAuthenticated=!1}function i(t){null!==t&&null!==t.uid&&(l.provider="Logged in with "+t.provider,l.isAuthenticated=!0)}function u(){l.showNav=!l.showNav}var l=this,c=new Firebase(n),s=c.getAuth();l.isAuthenticated=!1,l.provider="Not logged in",l.login=r,l.logout=a,l.toggleNav=u,i(s),e.$on("$locationChangeStart",function(){return l.showNav=!1})}angular.module("app").controller("BaseController",t),t.$inject=["$location","$rootScope","FIREBASE_URL","authService"]}(),angular.module("app").filter("unique",function(){return function(t,e){if(e===!1)return t;if((e||angular.isUndefined(e))&&angular.isArray(t)){var n=[],o=function(t){return angular.isObject(t)&&angular.isString(e)?t[e]:t};angular.forEach(t,function(t){for(var e=!1,r=0;r<n.length;r++)if(angular.equals(o(n[r]),o(t))){e=!0;break}e||n.push(t)}),t=n}return t}}),function(){function t(t,e,n){function o(e){var n="mobile",o=""+a+"?url="+e+"&strategy="+n;return window.location.href.indexOf("localhost")>-1||(o+="&key="+i),t.get(o).success(function(t){return t.data}).error(function(t){console.log(t)})}function r(){return e(c)}var a="https://www.googleapis.com/pagespeedonline/v2/runPagespeed",i="AIzaSyCEuHSeoUR2wQ86Qr8lSEAs6ykitWIts3s",u=new Firebase(n),l=u.getAuth(),c=new Firebase(n+"/users/"+l.uid+"/tests"),s={get:o,getTests:r};return s}angular.module("app").factory("psiService",t),t.$inject=["$http","$firebaseArray","FIREBASE_URL"]}(),function(){function t(t){function e(e){e&&t.get(n.urlInput).then(function(t){n.tests.$add({url:n.urlInput,timestamp:Firebase.ServerValue.TIMESTAMP,test:t.data})})}var n=this;n.urlInput="http://corycode.me",n.addUrl=e,n.tests=t.getTests(),n.data=""}angular.module("app").controller("DashboardController",t),t.$inject=["psiService"]}(),function(){function t(t,e){var n=this;n.urlInput=t.search().url,n.tests=e.getTests()}angular.module("app").controller("DetailsController",t),t.$inject=["$location","psiService"]}(),function(){function t(){function t(){function t(t){e.tests.$remove(t).then(function(e){e.key()===t.$id})}var e=this;e.deleteTest=t}var e={replace:"true",restrict:"E",scope:{tests:"=",url:"="},templateUrl:"app/details/detail-history.directive.html",controller:t,controllerAs:"vm",bindToController:!0};return e}angular.module("app").directive("detailHistory",t)}();