"use strict";!function(){var t=angular.module("app",["ngRoute","firebase","chart.js"]);t.constant("FIREBASE_URL","https://psi-api.firebaseio.com"),t.config(["$routeProvider",function(t){t.when("/",{templateUrl:"app/core/templates/home.html"}),t.when("/about",{templateUrl:"app/core/templates/about.html"}),t.when("/account",{templateUrl:"app/core/templates/account.html"}),t.when("/dashboard",{templateUrl:"app/dashboard/dashboard.html"}),t.when("/details",{templateUrl:"app/details/details.html"}),t.otherwise({redirectTo:"/"})}]),t.run(["$rootScope","$location","authService",function(t,e,n){t.$on("$routeChangeStart",function(t,r,o){n.isLoggedIn()?console.log("Route Authenticated"):(e.path("/"),console.log("Route Unauthenticated"))})}])}(),function(){function t(t,e){function n(t){return i.$authWithOAuthPopup(t).then(function(t){var e=a.child("/users/"+t.uid);return e.child("authData").set(t),t})["catch"](function(t){return console.log("Authentication failed:",t)})}function r(){a.unauth()}function o(){return!!a.getAuth()}var a=new Firebase(e),i=t(a),u={login:n,logout:r,isLoggedIn:o};return u}angular.module("app").factory("authService",t),t.$inject=["$firebaseAuth","FIREBASE_URL"]}(),function(){function t(t,e,n,r){function o(e){r.login(e).then(function(e){i(e),t.path("/dashboard")})["catch"](function(t){return console.log("Authentication failed:",t)})}function a(){t.path("/"),r.logout(),l.provider="Not logged in",l.isAuthenticated=!1}function i(t){null!==t&&null!==t.uid&&(l.provider="Logged in with "+t.provider,l.isAuthenticated=!0)}function u(){l.showNav=!l.showNav}var l=this,c=new Firebase(n),s=c.getAuth();l.isAuthenticated=!1,l.provider="Not logged in",l.login=o,l.logout=a,l.toggleNav=u,i(s),e.$on("$locationChangeStart",function(){return l.showNav=!1})}angular.module("app").controller("BaseController",t),t.$inject=["$location","$rootScope","FIREBASE_URL","authService"]}(),angular.module("app").filter("unique",function(){return function(t,e){if(e===!1)return t;if((e||angular.isUndefined(e))&&angular.isArray(t)){var n=[],r=function(t){return angular.isObject(t)&&angular.isString(e)?t[e]:t};angular.forEach(t,function(t){for(var e=!1,o=0;o<n.length;o++)if(angular.equals(r(n[o]),r(t))){e=!0;break}e||n.push(t)}),t=n}return t}}),function(){function t(t,e,n){function r(e){var n="mobile",r=""+u+"?url="+e+"&strategy="+n;return window.location.href.indexOf("localhost")>-1||(r+="&key="+l),t.get(r).then(function(t){a(e,t.data)})}function o(t){h.$remove(t).then(function(e){e.key()===t.$id})}function a(t,e){h.$add({url:t,timestamp:Firebase.ServerValue.TIMESTAMP,test:e})}function i(){return h}var u="https://www.googleapis.com/pagespeedonline/v2/runPagespeed",l="AIzaSyCEuHSeoUR2wQ86Qr8lSEAs6ykitWIts3s",c=new Firebase(n),s=c.getAuth(),h=e(new Firebase(n+"/users/"+s.uid+"/tests")),p={runTest:r,deleteTest:o,getAllTests:i};return p}angular.module("app").factory("psiService",t),t.$inject=["$http","$firebaseArray","FIREBASE_URL"]}(),function(){function t(t){function e(e){e&&t.runTest(n.urlInput).then(function(t){return n.urlInput=""})}var n=this;n.data="",n.urlInput="http://corycode.me",n.tests=t.getAllTests(),n.addUrl=e}angular.module("app").controller("DashboardController",t),t.$inject=["psiService"]}(),function(){function t(t,e){var n=this;n.urlInput=t.search().url,n.tests=e.getAllTests(),n.labels=["January","February","March","April","May","June","July"],n.series=["Series A","Series B"],n.data=[[65,59,80,81,56,55,40],[28,48,40,19,86,27,90]]}angular.module("app").controller("DetailsController",t),t.$inject=["$location","psiService"]}(),function(){function t(){function t(t){function e(e){t.deleteTest(e)}var n=this;n.deleteTest=e}t.$inject=["psiService"];var e={replace:"true",restrict:"E",scope:{tests:"=",url:"="},templateUrl:"app/details/detail-history.directive.html",controller:t,controllerAs:"vm",bindToController:!0};return e}angular.module("app").directive("detailHistory",t)}();